name: Deploy to Zume (SFTP)
on:
  push:
    branches: [main]
  workflow_dispatch: {}

jobs:
  deploy:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v4
        with:
          fetch-depth: 0

      # Password auth (use this if you set SFTP_PASS)
      - name: Upload via SFTP (password)
        if: ${{ secrets.SFTP_PASS != '' }}
        uses: milanmk/actions-file-deployer@master
        with:
          remote-protocol: sftp
          remote-host: ${{ secrets.SFTP_HOST }}
          remote-user: ${{ secrets.SFTP_USER }}
          remote-password: ${{ secrets.SFTP_PASS }}
          remote-path: /wilsonrlewis/zombie_game      # ðŸ‘ˆ deploy here
          local-path: .                                # or 'dist' if you build
          sync: delta
          # remote-port: 22                            # set if yours isnâ€™t 22

      # SSH key auth (use this if you set SFTP_KEY)
      - name: Upload via SFTP (SSH key)
        if: ${{ secrets.SFTP_KEY != '' }}
        uses: milanmk/actions-file-deployer@master
        with:
          remote-protocol: sftp
          remote-host: ${{ secrets.SFTP_HOST }}
          remote-user: ${{ secrets.SFTP_USER }}
          ssh-private-key: ${{ secrets.SFTP_KEY }}
          remote-path: /wilsonrlewis/zombie_game      # ðŸ‘ˆ same path
          local-path: .
          sync: delta
          # remote-port: 22
